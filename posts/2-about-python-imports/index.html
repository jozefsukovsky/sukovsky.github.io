<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>About Python Imports - Jozef Sukovsky</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=twitter:card content="Seeing some code snippets, sometimes hurt. Sometimes it hurts even more, realizing I'm the author. But very often, it hurts right in the beginning of the file. The imports."><meta name=twitter:creator content="@jozefsukovsky"><meta property="og:url" content="https://sukovsky.com/posts/2-about-python-imports/"><meta property="og:title" content="About Python Imports"><meta property="og:description" content="Seeing some code snippets, sometimes hurt. Sometimes it hurts even more, realizing I'm the author. But very often, it hurts right in the beginning of the file. The imports."><link rel=stylesheet type=text/css media=screen href=https://sukovsky.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://sukovsky.com/css/syntax.css><link rel=stylesheet type=text/css media=screen href=https://sukovsky.com/css/cyberton.css></head><body><div class=grad-divider><header><div id=header class=container><div class=branding><h1 class=site-title><a href=https://sukovsky.com/>Jozef Sukovsky</a></h1><div class=site-copy>My personal blog. Read it, now!</div></div><input type=checkbox id=res-nav>
<label for=res-nav><div></div><div></div><div></div></label><nav id=main-nav><ul><li><a href=/>Home</a></li><li class=active><a href=/posts>Posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li></ul></nav></div></header><div id=content><main><div id=content class=container><article><header><time datetime="2020-09-01 14:00:00 +0000 +0000">01 Sep 20 14:00 UTC</time><h1><a href=/posts/2-about-python-imports/>About Python Imports</a></h1></header><section><p>Seeing some code snippets, sometimes hurt. Sometimes it hurts even more, realizing I&rsquo;m the author. But very often, it hurts right in the beginning of the file. The imports.</p><h2 id=how-this-should-be-according-to-the-theory>How this should be according to the theory</h2><p>Every other code editor or IDE has at least some possibility of linting. That&rsquo;s the feature which will bother you to fix some stuff while writing your code. Even though, many people just consider it some game, where sustaining these suggestions is the goal of it. Only it isn&rsquo;t.</p><p>Every Python story begins at <a href=https://www.python.org/dev/peps/pep-0008/#imports>PEP-8</a>. I won&rsquo;t copy-paste it. Just read it, if you haven&rsquo;t before. Then go through <a href=https://www.python.org/dev/peps/pep-0328/>PEP-328</a>.</p><h2 id=how-to-begin>How to begin</h2><p>It has been a while we&rsquo;ve seen this often, and we should be really glad it is not so common these days.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>my_unicorn</span> <span class=kn>import</span> <span class=o>*</span>
</code></pre></div><p>Now, what happens under the hood, if you decide to re-invent the wheel.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=s2>&#34;&#34;&#34; my_unicorn/__init__.py&#34;&#34;&#34;</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=kn>import</span> <span class=nn>sys</span>
</code></pre></div><p>and</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>Python</span> <span class=mf>3.8</span><span class=o>.</span><span class=mi>5</span> <span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=n>Jul</span> <span class=mi>20</span> <span class=mi>2020</span><span class=p>,</span> <span class=mi>19</span><span class=p>:</span><span class=mi>48</span><span class=p>:</span><span class=mi>14</span><span class=p>)</span> 
<span class=p>[</span><span class=n>GCC</span> <span class=mf>7.5</span><span class=o>.</span><span class=mi>0</span><span class=p>]</span> <span class=n>on</span> <span class=n>linux</span>
<span class=n>Type</span> <span class=s2>&#34;help&#34;</span><span class=p>,</span> <span class=s2>&#34;copyright&#34;</span><span class=p>,</span> <span class=s2>&#34;credits&#34;</span> <span class=ow>or</span> <span class=s2>&#34;license&#34;</span> <span class=k>for</span> <span class=n>more</span> <span class=n>information</span><span class=o>.</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>os</span>
<span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>):</span>
  <span class=n>File</span> <span class=s2>&#34;&lt;stdin&gt;&#34;</span><span class=p>,</span> <span class=n>line</span> <span class=mi>1</span><span class=p>,</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span>
<span class=ne>NameError</span><span class=p>:</span> <span class=n>name</span> <span class=s1>&#39;os&#39;</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>defined</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>sys</span>
<span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>):</span>
  <span class=n>File</span> <span class=s2>&#34;&lt;stdin&gt;&#34;</span><span class=p>,</span> <span class=n>line</span> <span class=mi>1</span><span class=p>,</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span>
<span class=ne>NameError</span><span class=p>:</span> <span class=n>name</span> <span class=s1>&#39;sys&#39;</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>defined</span>
<span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>my_unicorn</span> <span class=kn>import</span> <span class=o>*</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>os</span>
<span class=o>&lt;</span><span class=n>module</span> <span class=s1>&#39;os&#39;</span> <span class=kn>from</span> <span class=s1>&#39;/usr/lib/python3.8/os.py&#39;</span><span class=o>&gt;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>sys</span>
<span class=o>&lt;</span><span class=n>module</span> <span class=s1>&#39;sys&#39;</span> <span class=p>(</span><span class=n>built</span><span class=o>-</span><span class=ow>in</span><span class=p>)</span><span class=o>&gt;</span>
</code></pre></div><p>This is the simplest explanation. We just loaded the whole context of <code>my_unicorn</code>. We can go even further. Imagine, if for some reason we had some useful function we want to import from a poorly written executable, like this:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=s2>&#34;&#34;&#34; my_unicorn/__init__.py&#34;&#34;&#34;</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=kn>import</span> <span class=nn>sys</span>


<span class=k>def</span> <span class=nf>yarp</span><span class=p>():</span>
    <span class=k>print</span><span class=p>(</span><span class=s2>&#34;yarp&#34;</span><span class=p>)</span>

<span class=n>yarp</span><span class=p>()</span>
</code></pre></div><p>and</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>Python</span> <span class=mf>3.8</span><span class=o>.</span><span class=mi>5</span> <span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=n>Jul</span> <span class=mi>20</span> <span class=mi>2020</span><span class=p>,</span> <span class=mi>19</span><span class=p>:</span><span class=mi>48</span><span class=p>:</span><span class=mi>14</span><span class=p>)</span> 
<span class=p>[</span><span class=n>GCC</span> <span class=mf>7.5</span><span class=o>.</span><span class=mi>0</span><span class=p>]</span> <span class=n>on</span> <span class=n>linux</span>
<span class=n>Type</span> <span class=s2>&#34;help&#34;</span><span class=p>,</span> <span class=s2>&#34;copyright&#34;</span><span class=p>,</span> <span class=s2>&#34;credits&#34;</span> <span class=ow>or</span> <span class=s2>&#34;license&#34;</span> <span class=k>for</span> <span class=n>more</span> <span class=n>information</span><span class=o>.</span>
<span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>my_unicorn</span> <span class=kn>import</span> <span class=o>*</span>
<span class=n>yarp</span>
</code></pre></div><p>If multiple people worked on the code base and just did whatever they liked, this would come as one of the outputs eventually. That is btw, why we never should execute functions outside of <code>if __name__ == '__main__'</code> statement.</p><p>That&rsquo;s why we should do the following instead:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=s2>&#34;&#34;&#34; my_unicorn/__init__.py&#34;&#34;&#34;</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=kn>import</span> <span class=nn>sys</span>

<span class=k>def</span> <span class=nf>yarp</span><span class=p>():</span>
    <span class=k>print</span><span class=p>(</span><span class=s2>&#34;yarp&#34;</span><span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=n>yarp</span><span class=p>()</span>
</code></pre></div><p>and of course import like this:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>my_unicorn</span> <span class=kn>import</span> <span class=n>yarp</span>
</code></pre></div><h2 id=order>Order</h2><p>It is really painful to go through a file, if there are many different imports (let&rsquo;s not pretend, sometimes files will grow much larger than suggested, will have much more imports than suggested, etc.) randomly placed at the beginning of a file. Not only talking about not differentiating between standard library imports, 3rd party library imports or project imports, but not even grouping imports.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>my_unicorn.yarp</span> <span class=kn>import</span> <span class=n>yarpees</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=kn>import</span> <span class=nn>sys</span><span class=o>,</span> <span class=nn>logging</span>
<span class=kn>from</span> <span class=nn>my_unicorn.narp</span> <span class=kn>import</span> <span class=n>narpees</span>
<span class=kn>import</span> <span class=nn>my_unicorn</span>
</code></pre></div><p>We were just making sure, we all read PEP-8. This is explained there well.</p><h2 id=what-java-converts-often-do>What Java converts often do</h2><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>./my_unicorn/
├── __init__.py
├── org
│   └── my
│       └── whatever
│           └── path
│               ├── __init__.py
│               └── __pycache__
│                   └── __init__.cpython-38.pyc
└── __pycache__
    └── __init__.cpython-38.pyc

</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=s2>&#34;&#34;&#34; my_unicorn/org/my/whatever/path/__init__.py&#34;&#34;&#34;</span>
<span class=k>def</span> <span class=nf>narp</span><span class=p>():</span>
    <span class=k>print</span><span class=p>(</span><span class=s2>&#34;narp&#34;</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>Python</span> <span class=mf>3.8</span><span class=o>.</span><span class=mi>5</span> <span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=n>Jul</span> <span class=mi>20</span> <span class=mi>2020</span><span class=p>,</span> <span class=mi>19</span><span class=p>:</span><span class=mi>48</span><span class=p>:</span><span class=mi>14</span><span class=p>)</span>
<span class=p>[</span><span class=n>GCC</span> <span class=mf>7.5</span><span class=o>.</span><span class=mi>0</span><span class=p>]</span> <span class=n>on</span> <span class=n>linux</span>
<span class=n>Type</span> <span class=s2>&#34;help&#34;</span><span class=p>,</span> <span class=s2>&#34;copyright&#34;</span><span class=p>,</span> <span class=s2>&#34;credits&#34;</span> <span class=ow>or</span> <span class=s2>&#34;license&#34;</span> <span class=k>for</span> <span class=n>more</span> <span class=n>information</span><span class=o>.</span>
<span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>my_unicorn.org.my.whatever</span> <span class=kn>import</span> <span class=n>path</span> <span class=k>as</span> <span class=n>whatever_path</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>whatever_path</span><span class=o>.</span><span class=n>narp</span><span class=p>()</span>
<span class=n>narp</span>
<span class=o>&gt;&gt;&gt;</span>
</code></pre></div><p>Why shouldn&rsquo;t we do this. First, it is always better to follow <a href=https://www.python.org/dev/peps/pep-0020/>PEP-20</a> a.k.a <strong>The Zen of Python</strong>. Actually, many of the principles can clash with the solution above.</p><p>Second, if our code gets so complex, we have to do whatever_path alias to make it more clear, our file is most likely too long and hosts too many features and different use cases all together. It is not only for entertaining purposes, <a href=https://www.pylint.org/>Pylint</a> will bother us, if our file reaches 1000 lines. We really shouldn&rsquo;t do it routinely.</p><p>Third is the question, what else do we need from the <code>path</code> module that makes us import is a whole. And not doing <code>from my_unicorn.org.my.whatever.path import narp</code>. Back then, there were discussions, which solution is faster, which is more memory-effective, when comparing <code>path.narp() or whatever_path.narp()</code> vs just <code>narp()</code>. It is at least not so important with current Python versions and considering contemporary computers. If we do plenty loops (millions) and we care about some performance improvement regarding imports, <code>from ....whatever.path import yarp</code> will perform a little bit better. This includes cases when we have some API or pipeline hammered with many requests and we do some loops in every one. Otherwise, won&rsquo;t make so much difference. And the gap between these two approaches seems to shorten in Python 3. And in a huge loops, you will always find better candidates to be improved.</p><p>At the end, it is just easier to simply do <code>from my_unicorn.whatever_path import yarp</code>.</p><h2 id=special-cases>Special cases</h2><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>numpy</span> <span class=kn>as</span> <span class=nn>np</span>
<span class=kn>import</span> <span class=nn>pandas</span> <span class=kn>as</span> <span class=nn>pd</span>
</code></pre></div><p>These don&rsquo;t really make much sense, plus both will cause Pylint complains, because <code>np</code> and <code>pd</code> are not descriptive variables. So, we just don&rsquo;t do this, when we use these tools in some &ldquo;programmed&rdquo; code base. However, we will see this around in many statistics/analytics/data science/&ldquo;data science&rdquo; tutorials, examples. And it just will be okay. As that is more about job done than having a sustainable code base.</p><p>That is all. There are, for sure some Python internals which can explain all that above in a more exhausting way, but that is for some deeper Python developers to write. We ordinary ones will live long with the above.</p></section><section><h3>Tags</h3><ul class=tags><li><a class=tag-link href=https://sukovsky.com/tags/import/>import</a></li><li><a class=tag-link href=https://sukovsky.com/tags/pep/>pep</a></li><li><a class=tag-link href=https://sukovsky.com/tags/python/>python</a></li></ul></section></article></div></main></div><footer><div id=footer class=container><div class=grad-divider></div><nav><div>2020 © Jozef Sukovsky. <a target=_blank href=https://github.com/jozefsukovsky>Github</a>. <a target=_blank href=https://twitter.com/jozefsukovsky>Twitter</a>. <a target=_blank href=https://www.linkedin.com/in/jozefsukovsky/>Linkedin</a>. <a target=_blank href=/index.xml>RSS</a>.</div><div><a target=_blank href=https://github.com/jozefsukovsky/hugo-cyberton>Cyberton</a> theme on&nbsp;<a target=_blank href=https://gohugo.io>Hugo</a>.</div></nav></div></footer></body></html>